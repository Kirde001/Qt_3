#ifndef EDITBOOKDIALOG_H
#define EDITBOOKDIALOG_H

#include <QDialog>
#include <QLineEdit>
#include <QSpinBox>
#include <QDialogButtonBox>
#include <QVBoxLayout>
#include <QLabel>
#include <QDateEdit>
#include <QEvent> // Add QEvent

class EditBookDialog : public QDialog
{
    Q_OBJECT

public:
    explicit EditBookDialog(QWidget *parent = nullptr);
    ~EditBookDialog();

    QString getAuthor() const;
    QString getTitle() const;
    QDate getPublishDate() const;
    QString getGenre() const;
    QString getPublisher() const;
    QString getISBN() const;
    int getPageCount() const;

    void setBookData(const QString &author, const QString &title, const QDate &publishDate, const QString &genre,
                     const QString &publisher, const QString &isbn, int pageCount);

protected:
    // Override eventFilter to intercept events
    bool eventFilter(QObject *watched, QEvent *event) override;

private slots:
    void on_buttonBox_accepted();

private:
    QLineEdit *authorLineEdit;
    QLineEdit *titleLineEdit;
    QDateEdit *publishDateEdit;
    QLineEdit *genreLineEdit;
    QLineEdit *publisherLineEdit;
    QLineEdit *isbnLineEdit;
    QSpinBox *pageCountSpinBox;

    QDialogButtonBox *buttonBox;

    void setupUi();
    bool validateInput();
};

#endif // EDITBOOKDIALOG_H
